message("Configuring NUMPY:\n@NUMPY_binary@")
set(ENV{LD_LIBRARY_PATH} "@CMAKE_CURRENT_BINARY_DIR@/python-build/lib")
# setup the site.cfg file
file(WRITE "@NUMPY_binary@/site.cfg"
"
[blas]
library_dirs = @CLAPACK_binary@/BLAS/SRC/@CMAKE_CFG_INTDIR@/;@CLAPACK_binary@/F2CLIBS/libf2c/@CMAKE_CFG_INTDIR@/
libraries = blas,libf2c

[lapack]
library_dirs = @CLAPACK_binary@/SRC/@CMAKE_CFG_INTDIR@/
lapack_libs = lapack
")

execute_process(
  COMMAND "@slicer_PYTHON_EXECUTABLE@" setup.py config
  WORKING_DIRECTORY "@NUMPY_binary@"
  RESULT_VARIABLE res)

if(NOT ${res} EQUAL 0)
  message(FATAL_ERROR "Error in config of NUMPY")
endif()
message("Numpy config worked.")
